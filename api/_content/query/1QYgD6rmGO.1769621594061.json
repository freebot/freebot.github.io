{"_path":"/blog/hugo-github-actions","_dir":"blog","_draft":false,"_partial":false,"_locale":"","title":"Cómo implementar Github Actions en Hugo Blog con S3","description":"En este artículo, te mostraré cómo implementar Github Actions en tu blog Hugo para automatizar el proceso de construcción, minimización y despliegue de tu sitio web en AWS S3 Bucket.","date":"2023-03-14","body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"En este artículo, te mostraré cómo implementar Github Actions en tu blog Hugo para automatizar el proceso de construcción, minimización y despliegue de tu sitio web en AWS S3 Bucket."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Primero, debemos crear un archivo de configuración para la acción de Github. Para hacer esto, crea una carpeta llamada .github/workflows/ y dentro de ella un archivo llamado main.yml. En este archivo, configuraremos los desencadenadores y los trabajos para nuestra acción."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"El siguiente código muestra cómo debes configurar el archivo main.yml:"}]},{"type":"element","tag":"pre","props":{"className":"language-less shiki shiki-themes github-light github-dark","code":"\nname: Deploy website to S3 bucket\n\non:\n  push:\n    branches:\n      - master\n\njobs:\n  deploy:\n    runs-on: ubuntu-18.04\n    steps:\n      - uses: actions/checkout@v2\n        with:\n          submodules: true  # Fetch Hugo themes \n          fetch-depth: 0    # Fetch all history for .GitInfo and .Lastmod\n\n      - name: Setup Hugo\n        uses: peaceiris/actions-hugo@v2\n        with:\n          hugo-version: 'latest'\n          extended: true\n\n      - name: Configure AWS Credentials\n        uses: aws-actions/configure-aws-credentials@v1\n        with:\n          aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}\n          aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}\n          aws-region: <Your-Region>\n\n      - name: Build website\n        run: hugo --minify\n\n      - name: Hugo deploy static site to S3 bucket and invalidate Cloudfront cache\n        run: hugo deploy --maxDeletes -1 --invalidateCDN\n","language":"less","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"name: Deploy website to S3 bucket\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"on:\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  push:\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    branches:\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      - master\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"jobs:\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  deploy:\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    runs-on: ubuntu-18.04\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    steps:\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      - uses: actions/checkout@v2\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        with:\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"          submodules: true  # Fetch Hugo themes \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"          fetch-depth: 0    # Fetch all history for .GitInfo and .Lastmod\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      - name: Setup Hugo\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        uses: peaceiris/actions-hugo@v2\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        with:\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"          hugo-version: 'latest'\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"          extended: true\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      - name: Configure AWS Credentials\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        uses: aws-actions/configure-aws-credentials@v1\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        with:\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":27},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"          aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":28},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"          aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":29},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"          aws-region: <Your-Region>\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":30},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":31},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      - name: Build website\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":32},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        run: hugo --minify\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":33},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":34},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      - name: Hugo deploy static site to S3 bucket and invalidate Cloudfront cache\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":35},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        run: hugo deploy --maxDeletes -1 --invalidateCDN\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"En este archivo de configuración, hemos definido que la acción solo se activará cuando alguien realice un cambio en la rama principal. También se ha especificado que se ejecutará en un contenedor Docker de Ubuntu 18.04 y se realizarán los siguientes pasos:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Clonar el repositorio y sus submódulos."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Configurar Hugo."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Configurar las credenciales de AWS."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Construir el sitio web con Hugo."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Desplegar el sitio web en un Bucket de AWS S3."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Para completar la configuración de las credenciales de AWS, debes crear dos secretos en la sección \"Secretos\" de la configuración de tu repositorio en Github. Uno llamado AWS_ACCESS_KEY_ID con el valor de tu ID de acceso de AWS y otro llamado AWS_SECRET_ACCESS_KEY con el valor de tu clave de acceso secreta de AWS."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Con esto, ya hemos configurado Github Actions para desplegar nuestro sitio web automáticamente cada vez que realizamos un cambio en la rama principal. Ahora, ya no tendrás que preocuparte por el proceso de construcción y despliegue, lo que te permitirá centrarte en la creación de contenido para tu blog."}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:blog:hugo-github-actions.md","_source":"content","_file":"blog/hugo-github-actions.md","_stem":"blog/hugo-github-actions","_extension":"md"}