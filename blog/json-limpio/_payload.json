[{"data":1,"prerenderedAt":220},["ShallowReactive",2],{"content-query-WbrzkM7qES":3},{"_path":4,"_dir":5,"_draft":6,"_partial":6,"_locale":7,"title":8,"description":9,"date":10,"author":11,"body":12,"_type":214,"_id":215,"_source":216,"_file":217,"_stem":218,"_extension":219},"/blog/json-limpio","blog",false,"","Cómo limpiar un string para JSON con Python","Si alguna vez has intentado convertir un string en formato JSON en Python, es posible que te hayas encontrado con errores causados por caracteres no compatibles con el formato. Esto puede ser frustrante, especialmente cuando estás trabajando con una gran cantidad de datos y necesitas que todo esté en formato JSON para poder procesarlo correctamente.","2023-03-18","Jorge",{"type":13,"children":14,"toc":212},"root",[15,22,27,32,196,201,206],{"type":16,"tag":17,"props":18,"children":19},"element","p",{},[20],{"type":21,"value":9},"text",{"type":16,"tag":17,"props":23,"children":24},{},[25],{"type":21,"value":26},"Hoy en día, tuve ese problema y pasé varias horas tratando de solucionarlo. Afortunadamente, me puse en contacto con el equipo de chatgpt, y me proporcionaron una función útil que me permitió limpiar el string y asegurarme de que fuera compatible con JSON.",{"type":16,"tag":17,"props":28,"children":29},{},[30],{"type":21,"value":31},"Aquí está la función que me proporcionaron:",{"type":16,"tag":33,"props":34,"children":38},"pre",{"className":35,"code":36,"language":37,"meta":7,"style":7},"language-python shiki shiki-themes github-light github-dark","\nimport re\nimport json\n\ndef clean_string_for_json(s):\n    # Remove page breaks and other non-ASCII characters\n    s = re.sub(r'[^\\x00-\\x7F]+', '', s)\n    s = s.replace('\\n', '').replace('\\r', '')\n\n    # Load string as JSON to check for compatibility\n    try:\n        json.loads(s)\n    except ValueError:\n        # Replace non-compliant characters with a space\n        s = re.sub(r'[^\\x00-\\x7F]+', ' ', s)\n\n    return s\n","python",[39],{"type":16,"tag":40,"props":41,"children":42},"code",{"__ignoreMap":7},[43,55,64,73,81,90,99,108,117,125,134,143,152,161,170,179,187],{"type":16,"tag":44,"props":45,"children":48},"span",{"class":46,"line":47},"line",1,[49],{"type":16,"tag":44,"props":50,"children":52},{"emptyLinePlaceholder":51},true,[53],{"type":21,"value":54},"\n",{"type":16,"tag":44,"props":56,"children":58},{"class":46,"line":57},2,[59],{"type":16,"tag":44,"props":60,"children":61},{},[62],{"type":21,"value":63},"import re\n",{"type":16,"tag":44,"props":65,"children":67},{"class":46,"line":66},3,[68],{"type":16,"tag":44,"props":69,"children":70},{},[71],{"type":21,"value":72},"import json\n",{"type":16,"tag":44,"props":74,"children":76},{"class":46,"line":75},4,[77],{"type":16,"tag":44,"props":78,"children":79},{"emptyLinePlaceholder":51},[80],{"type":21,"value":54},{"type":16,"tag":44,"props":82,"children":84},{"class":46,"line":83},5,[85],{"type":16,"tag":44,"props":86,"children":87},{},[88],{"type":21,"value":89},"def clean_string_for_json(s):\n",{"type":16,"tag":44,"props":91,"children":93},{"class":46,"line":92},6,[94],{"type":16,"tag":44,"props":95,"children":96},{},[97],{"type":21,"value":98},"    # Remove page breaks and other non-ASCII characters\n",{"type":16,"tag":44,"props":100,"children":102},{"class":46,"line":101},7,[103],{"type":16,"tag":44,"props":104,"children":105},{},[106],{"type":21,"value":107},"    s = re.sub(r'[^\\x00-\\x7F]+', '', s)\n",{"type":16,"tag":44,"props":109,"children":111},{"class":46,"line":110},8,[112],{"type":16,"tag":44,"props":113,"children":114},{},[115],{"type":21,"value":116},"    s = s.replace('\\n', '').replace('\\r', '')\n",{"type":16,"tag":44,"props":118,"children":120},{"class":46,"line":119},9,[121],{"type":16,"tag":44,"props":122,"children":123},{"emptyLinePlaceholder":51},[124],{"type":21,"value":54},{"type":16,"tag":44,"props":126,"children":128},{"class":46,"line":127},10,[129],{"type":16,"tag":44,"props":130,"children":131},{},[132],{"type":21,"value":133},"    # Load string as JSON to check for compatibility\n",{"type":16,"tag":44,"props":135,"children":137},{"class":46,"line":136},11,[138],{"type":16,"tag":44,"props":139,"children":140},{},[141],{"type":21,"value":142},"    try:\n",{"type":16,"tag":44,"props":144,"children":146},{"class":46,"line":145},12,[147],{"type":16,"tag":44,"props":148,"children":149},{},[150],{"type":21,"value":151},"        json.loads(s)\n",{"type":16,"tag":44,"props":153,"children":155},{"class":46,"line":154},13,[156],{"type":16,"tag":44,"props":157,"children":158},{},[159],{"type":21,"value":160},"    except ValueError:\n",{"type":16,"tag":44,"props":162,"children":164},{"class":46,"line":163},14,[165],{"type":16,"tag":44,"props":166,"children":167},{},[168],{"type":21,"value":169},"        # Replace non-compliant characters with a space\n",{"type":16,"tag":44,"props":171,"children":173},{"class":46,"line":172},15,[174],{"type":16,"tag":44,"props":175,"children":176},{},[177],{"type":21,"value":178},"        s = re.sub(r'[^\\x00-\\x7F]+', ' ', s)\n",{"type":16,"tag":44,"props":180,"children":182},{"class":46,"line":181},16,[183],{"type":16,"tag":44,"props":184,"children":185},{"emptyLinePlaceholder":51},[186],{"type":21,"value":54},{"type":16,"tag":44,"props":188,"children":190},{"class":46,"line":189},17,[191],{"type":16,"tag":44,"props":192,"children":193},{},[194],{"type":21,"value":195},"    return s\n",{"type":16,"tag":17,"props":197,"children":198},{},[199],{"type":21,"value":200},"Esta función primero elimina caracteres no compatibles con el formato JSON utilizando una expresión regular. Luego, elimina los saltos de línea y los caracteres de retorno de carro. Finalmente, comprueba si el string se puede cargar como JSON. Si el string no se puede cargar como JSON, la función reemplaza los caracteres no compatibles con un espacio.",{"type":16,"tag":17,"props":202,"children":203},{},[204],{"type":21,"value":205},"Con esta función, pude limpiar mis strings problemáticos y asegurarme de que estuvieran en formato JSON compatible. Espero que esta función también te resulte útil en tu trabajo con JSON en Python.",{"type":16,"tag":207,"props":208,"children":209},"style",{},[210],{"type":21,"value":211},"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}",{"title":7,"searchDepth":57,"depth":57,"links":213},[],"markdown","content:blog:json-limpio.md","content","blog/json-limpio.md","blog/json-limpio","md",1769621611521]