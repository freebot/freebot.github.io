<!DOCTYPE html>
<html >
<head><meta charset="utf-8">
<title>Cómo limpiar un string para JSON con Python</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="og:title" content="Cómo limpiar un string para JSON con Python">
<meta name="description" content="Si alguna vez has intentado convertir un string en formato JSON en Python, es posible que te hayas encontrado con errores causados por caracteres no compatibles con el formato. Esto puede ser frustrante, especialmente cuando estás trabajando con una gran cantidad de datos y necesitas que todo esté en formato JSON para poder procesarlo correctamente.">
<meta name="og:description" content="Si alguna vez has intentado convertir un string en formato JSON en Python, es posible que te hayas encontrado con errores causados por caracteres no compatibles con el formato. Esto puede ser frustrante, especialmente cuando estás trabajando con una gran cantidad de datos y necesitas que todo esté en formato JSON para poder procesarlo correctamente."><link rel="modulepreload" href="/blog/json-limpio/_payload.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/entry.cb396a52.js"><link rel="preload" as="style" href="/_nuxt/entry.c3d937b4.css"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/app.config.ca9f407a.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/_...slug_.1df33d98.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ContentRenderer.f64f6174.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ContentRendererMarkdown.838c6566.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/index.a6ef77ff.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ContentDoc.a9d67dc2.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/composables.4fc3a1b1.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ContentQuery.1be907d2.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/cookie.3778a7f4.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/query.c3f7607a.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/utils.db3402c2.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/index.f6a686d6.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/Utterances.589b78d0.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseP.74a54c5f.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseCode.34848115.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/error-component.3e2318a0.js"><link rel="stylesheet" href="/_nuxt/entry.c3d937b4.css"><style>pre code .line{display:block;min-height:1rem}</style></head>
<body ><div id="__nuxt"><div class="h-screen"><!--[--><main class="relative mx-auto max-w-prose overflow-hidden bg-white py-16 px-4 sm:px-6 lg:px-8"><a href="/blog" class="block cursor-pointer"><svg xmlns="http://www.w3.org/2000/svg" class="inline h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M11 17l-5-5m0 0l5-5m-5 5h12"></path></svg> Regresar </a><!--[--><h2 class="my-4 text-4xl font-semibold">Cómo limpiar un string para JSON con Python</h2><p class="my-4 text-gray-500"> por Jorge, 18-Mar-2023</p><div class="prose prose-lg first-letter:text-3xl first-letter:text-blue-600"><div><p><!--[-->Si alguna vez has intentado convertir un string en formato JSON en Python, es posible que te hayas encontrado con errores causados por caracteres no compatibles con el formato. Esto puede ser frustrante, especialmente cuando estás trabajando con una gran cantidad de datos y necesitas que todo esté en formato JSON para poder procesarlo correctamente.<!--]--></p><p><!--[-->Hoy en día, tuve ese problema y pasé varias horas tratando de solucionarlo. Afortunadamente, me puse en contacto con el equipo de chatgpt, y me proporcionaron una función útil que me permitió limpiar el string y asegurarme de que fuera compatible con JSON.<!--]--></p><p><!--[-->Aquí está la función que me proporcionaron:<!--]--></p><!--[--><pre><code>
import re
import json

def clean_string_for_json(s):
    # Remove page breaks and other non-ASCII characters
    s = re.sub(r&#39;[^\x00-\x7F]+&#39;, &#39;&#39;, s)
    s = s.replace(&#39;\n&#39;, &#39;&#39;).replace(&#39;\r&#39;, &#39;&#39;)

    # Load string as JSON to check for compatibility
    try:
        json.loads(s)
    except ValueError:
        # Replace non-compliant characters with a space
        s = re.sub(r&#39;[^\x00-\x7F]+&#39;, &#39; &#39;, s)

    return s
</code></pre><!--]--><p><!--[-->Esta función primero elimina caracteres no compatibles con el formato JSON utilizando una expresión regular. Luego, elimina los saltos de línea y los caracteres de retorno de carro. Finalmente, comprueba si el string se puede cargar como JSON. Si el string no se puede cargar como JSON, la función reemplaza los caracteres no compatibles con un espacio.<!--]--></p><p><!--[-->Con esta función, pude limpiar mis strings problemáticos y asegurarme de que estuvieran en formato JSON compatible. Espero que esta función también te resulte útil en tu trabajo con JSON en Python.<!--]--></p></div></div><!--]--><div></div></main><!--]--></div></div><script type="module">import p from "/blog/json-limpio/_payload.js";window.__NUXT__={...p,...((function(a,b){return {state:{},_errors:{},serverRendered:true,config:{public:{content:{locales:[],defaultLocale:b,integrity:1680741750648,experimental:{stripQueryParameters:a,clientDB:a},api:{baseURL:"\u002Fapi\u002F_content"},navigation:{fields:[]},tags:{p:"prose-p",a:"prose-a",blockquote:"prose-blockquote","code-inline":"prose-code-inline",code:"prose-code",em:"prose-em",h1:"prose-h1",h2:"prose-h2",h3:"prose-h3",h4:"prose-h4",h5:"prose-h5",h6:"prose-h6",hr:"prose-hr",img:"prose-img",ul:"prose-ul",ol:"prose-ol",li:"prose-li",strong:"prose-strong",table:"prose-table",thead:"prose-thead",tbody:"prose-tbody",td:"prose-td",th:"prose-th",tr:"prose-tr"},highlight:a,wsUrl:b,documentDriven:a,host:b,trailingSlash:a,anchorLinks:{depth:4,exclude:[1]}},twicpics:{domain:"https:\u002F\u002Ffreebot.twic.pics"}},app:{baseURL:"\u002F",buildAssetsDir:"\u002F_nuxt\u002F",cdnURL:b}},prerenderedAt:1680741766400}}(false,"")))}</script><script type="module" src="/_nuxt/entry.cb396a52.js" crossorigin></script><script type="module" src="/_nuxt/_...slug_.1df33d98.js" crossorigin></script><script type="module" src="/_nuxt/ContentDoc.a9d67dc2.js" crossorigin></script><script type="module" src="/_nuxt/Utterances.589b78d0.js" crossorigin></script><script type="module" src="/_nuxt/ContentRenderer.f64f6174.js" crossorigin></script><script type="module" src="/_nuxt/ContentRendererMarkdown.838c6566.js" crossorigin></script><script type="module" src="/_nuxt/ProseP.74a54c5f.js" crossorigin></script><script type="module" src="/_nuxt/ProseCode.34848115.js" crossorigin></script></body>
</html>